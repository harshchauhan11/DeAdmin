<ion-header>

  <ion-navbar>
    <ion-title>AddStore</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>

  <!-- <div class="item item-input">
        <ion-label stacked>Retailer Name</ion-label>
        <ion-toolbar>
          <ion-searchbar [(ngModel)]="searchTerm" [formControl]="searchControl" (ionInput)="filterItems(); this.listShow = true;"></ion-searchbar>
        </ion-toolbar>
  
        <ion-list *ngIf="listShow" class="retailerList">
          <ion-item *ngFor="let user of items" (click)="selectRetailer(user)">{{user.name}}<br/><small>{{user.rid}}</small></ion-item>
        </ion-list>
      </div> -->

  <form [formGroup]="createStoreForm" (submit)="createStore()" novalidate>

    <div class="item item-input">
      <ion-label stacked>Retailer Name: {{user.rid}}:{{user.name}}</ion-label>
      <a ion-button small color="deRed" (click)="retailerModal()">CHOOSE RETAILER</a>
      <input type="hidden" formControlName="retailerId" value={{user.rid}}>
      <!-- <button ion-button (click)="retailerModal()">CHOOSE RETAILER</button> -->
    </div>

    <div class="item item-input">
      <ion-label stacked>Retailer Type</ion-label>
      <ion-list radio-group formControlName="retailerType">
        <ion-item *ngFor="let r of retailerTypes">
          <ion-label>{{r.type}}</ion-label>
          <ion-radio value="{{r.tid}}"></ion-radio>
        </ion-item>
      </ion-list>
      <!-- <ion-select formControlName="retailerType" placeholder="Select Retailer Type">Retailer Type
        <ion-option *ngFor="let r of retailerTypes" value={{r.tid}}>{{r.type}}</ion-option>
      </ion-select> -->
    </div>

    <div class="item item-input">
      <ion-label stacked>Store Type</ion-label>
      <ion-list radio-group formControlName="storeType">
        <ion-item *ngFor="let s of storeTypes">
          <ion-label>{{s.type}}</ion-label>
          <ion-radio value="{{s.sid}}"></ion-radio>
        </ion-item>
      </ion-list>
      <!-- <ion-select formControlName="storeType" placeholder="Select Store Type">Store Type
          <ion-option *ngFor="let s of storeTypes" value={{s.sid}}>{{s.type}}</ion-option>
        </ion-select> -->
    </div>


    <div class="item item-input">
      <ion-label stacked>Store Name</ion-label>
      <ion-input [(ngModel)]="storeName" (change)="setImageName()" formControlName="storeName" type="text" placeholder="What is store's name?">
      </ion-input>
    </div>

    <!-- <div class="item item-input">
      <ion-label stacked>Password</ion-label>
      <ion-input formControlName="passwd" type="password" placeholder="What will user's secret?">
      </ion-input>
    </div>

    <div class="item item-input">
      <ion-label stacked>Email</ion-label>
      <ion-input formControlName="email" type="email" placeholder="What is user's email?">
      </ion-input>
    </div>

    <div class="item item-input">
      <ion-label stacked>First Name</ion-label>
      <ion-input formControlName="fname" type="text" placeholder="What is user's firstname?">
      </ion-input>
    </div>

    <div class="item item-input">
      <ion-label stacked>Last Name</ion-label>
      <ion-input formControlName="lname" type="text" placeholder="What is user's lastname?">
      </ion-input>
    </div> -->

    <div class="item item-input">
      <ion-label stacked>Store Photo</ion-label>
      <button ion-button small color="deBlue" (click)="getImage()" [disabled]="!createStoreForm.valid">Capture/Browse Photo</button>
      <button ion-button small color="deBlue" (click)="uploadFile()" [disabled]="!createStoreForm.valid">Upload</button>
      <br/>
      <img src="{{imageURI}}" *ngIf="imageURI" alt="Ionic File" height="200" />

      <ion-input [(ngModel)]="imageFilePathRemote" formControlName="storePhoto" type="text" placeholder="This will be filled automatically."
        disabled>
      </ion-input>
    </div>

    <div class="item item-input">
      <ion-label stacked>Store Location</ion-label>
      <a ion-button small color="deRed" (click)="getCurrentLocation($event)">DETECT LOCATION</a>
      <br/>

      <ion-input [(ngModel)]="storeLocation" formControlName="latLng" type="text" placeholder="This will be filled automatically."
        disabled>
      </ion-input>
    </div>

    <br/>
    <button ion-button full color="deBlue" type="submit" [disabled]="!createStoreForm.valid">
      Add STORE
    </button>
  </form>
</ion-content>